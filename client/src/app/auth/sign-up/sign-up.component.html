<div class="sign-up-container">
  <div class="left-side">
    <div>
      <div class="logo-container">
        <img src="../../../assets/icon-just.svg" alt="Favour Flow Logo" class="logo"
          style="width: 80px;   margin-top: 30px;">
        <h1 class="title">Favour Flow</h1>
      </div>

      <div>
        <p class="subtitle">Keep track of your life's little favours</p>
        <div class="info">
          <mat-icon class="info-icon">check_circle</mat-icon>
          <p class="info-text">Track favours given and received</p>
        </div>
        <div class="info">
          <mat-icon class="info-icon">groups</mat-icon>
          <p class="info-text">Managed relationship better</p>
        </div>
        <div class="info">
          <mat-icon class="info-icon">area_chart</mat-icon>
          <p class="info-text">Visualise your favour balance</p>
        </div>
      </div>

    </div>


  </div>

  <div class="right-side">
    <div class="sign-up-form-container">
      <div style="text-align: center; margin-bottom: 65px;">
        <h1 class="sign-title">Create Account</h1>
        <p class="sign-subtitle">Join Favour Flow to manage your favours</p>
      </div>


      <div>
        <form [formGroup]="signUpForm" class="sign-up-form">
          <div class="form-fields" style="display: flex;; flex-direction: column; gap: 20px;">
            <!-- <div class="profile-picture-container">
              <div class="avatar-wrapper" style="background: #e6e7eb;">
                @if (profileImageUrl) {
                <img [src]="profileImageUrl" alt="Profile Picture" style="width: 90%;" class="uploaded-avatar" />
                } @else {
                <mat-icon style="color: #9ca2af; transform:scale(1.5)">person</mat-icon>
                }



                <input #fileInput type="file" accept="image/*" (change)="onProfilePictureSelected($event)"
                  style="display: none" />

                <button mat-icon-button class="upload-btn" type="button" (click)="fileInput.click()">
                  <mat-icon>photo_camera</mat-icon>
                </button>
              </div>
              <p class="upload-text">Upload profile picture</p>
            </div> -->

            <div class="name-fields" style="display: flex; gap: 20px;">
              <mat-form-field appearance="fill" class="full-width" appearance="outline">
                <mat-label>First Name</mat-label>
                <mat-icon class="auth-icons" matIconPrefix>person</mat-icon>
                <input matInput [formControl]="signUpForm.controls.firstName" type="text" placeholder="First Name">
                @if (signUpForm.get('firstName')?.hasError('required')) {
                <mat-error>
                  First name is required
                </mat-error>
                }
              </mat-form-field>
              <mat-form-field appearance="fill" class="full-width" appearance="outline">

                <mat-label>Last Name</mat-label>
                <mat-icon class="auth-icons" matIconPrefix>person</mat-icon>
                <input matInput [formControl]="signUpForm.controls.lastName" type="text" placeholder="Last Name">
                @if (signUpForm.get('lastName')?.hasError('required')) {
                <mat-error>
                  Last name is required
                </mat-error>
                }
              </mat-form-field>
            </div>
            <mat-form-field appearance="fill" class="full-width" appearance="outline">
              <mat-label>Email</mat-label>
              <mat-icon class="auth-icons" matIconPrefix>email</mat-icon>
              <input matInput [formControl]="signUpForm.controls.email" type="email" placeholder="Email">
              @if (signUpForm.get('email')?.hasError('required')) {
              <mat-error>
                Email is required
              </mat-error>
              }
              @if (signUpForm.get('email')?.hasError('email')) {
              <mat-error>
                Invalid email address
              </mat-error>
              }
            </mat-form-field>

            <app-password [control]="signUpForm.controls.password"></app-password>
            <app-password [control]="signUpForm.controls.confirmPassword" label="Confirm Password"></app-password>

            <mat-checkbox [formControl]="signUpForm.controls.agreement" class="remember-me">
              <p class="sign-up-prompt">I agree to the <a href="/sign-in" class="sign-up-link">Terms of Service</a> and
                <a href="/sign-in" class="sign-up-link">Privacy Policy</a>
              </p>
            </mat-checkbox>

            @if(signUpForm.get('agreement')?.hasError('required') && signUpForm.touched) {
               <mat-error>
                You must agree to the terms and conditions
               </mat-error>
            }

            <div class="error-messages">
              @if(signUpForm.hasError('submissionError')){
                <mat-error >
                  {{signUpForm.getError('submissionError')?.message}}
                </mat-error>
              }

            </div>

          </div>
          <button mat-raised-button class="sign-btn" (click)="onSubmit()">Create Account</button>
          <div style="text-align: center;">
            <p class="sign-up-prompt">Already have an account? <a href="/sign-in" class="sign-up-link">Sign In</a></p>
          </div>

        </form>
      </div>

    </div>
  </div>
</div>
